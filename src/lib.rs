use sdl2::{pixels::Color, render::Canvas};
use sdl2::video::Window;
use sdl2::rect::*;

/// Displays a CHIP-8 onto a canvas (can overflow if pixel_size is too big)
pub fn display_chip8(ch8display: [[bool; 64]; 32], canvas: &mut Canvas<Window>, pixel_size: u32, white: Color, black: Color) -> Result<(), String>{
    for (y, row) in ch8display.iter().enumerate() {
        for (x, pix) in row.iter().enumerate() {
            canvas.set_draw_color({ // Set draw color
                if *pix { white } else { black }
            });
            canvas.fill_rect(Rect::new( // Draw the pixel
                x as i32 * pixel_size as i32,
                y as i32 * pixel_size as i32,
             pixel_size,
            pixel_size
            ))?;
        }
    }
    Ok(())
}

pub fn get_default_font() -> Vec<u8> {
    [
        0xF0, 0x90, 0x90, 0x90, 0xF0, // 0
        0x20, 0x60, 0x20, 0x20, 0x70, // 1
        0xF0, 0x10, 0xF0, 0x80, 0xF0, // 2
        0xF0, 0x10, 0xF0, 0x10, 0xF0, // 3
        0x90, 0x90, 0xF0, 0x10, 0x10, // 4
        0xF0, 0x80, 0xF0, 0x10, 0xF0, // 5
        0xF0, 0x80, 0xF0, 0x90, 0xF0, // 6
        0xF0, 0x10, 0x20, 0x40, 0x40, // 7
        0xF0, 0x90, 0xF0, 0x90, 0xF0, // 8
        0xF0, 0x90, 0xF0, 0x10, 0xF0, // 9
        0xF0, 0x90, 0xF0, 0x90, 0x90, // A
        0xE0, 0x90, 0xE0, 0x90, 0xE0, // B
        0xF0, 0x80, 0x80, 0x80, 0xF0, // C
        0xE0, 0x90, 0x90, 0x90, 0xE0, // D
        0xF0, 0x80, 0xF0, 0x80, 0xF0, // E
        0xF0, 0x80, 0xF0, 0x80, 0x80  // F
    ].to_vec()
}
